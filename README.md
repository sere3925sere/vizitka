## Vizitka

Дипломная работа для курса джавы. Одностраничник с возможностью редактирования текста и загрузки фотографии. Распознаёт ссылки.

Опробовал Groovy и Webflux, groovy - синтаксический сахар для джавы, наконец я могу писать без точки с запятой в конце. Webflux - новая мозгодробительная итерация Spring MVC, позволяет распараллеливать код чуть получше. На их сайте предупредили, что для простых проектов Webflux не даёт больших преимуществ и серьёзно всё усложняет, так что здесь он скорее всего не к месту. Но на чём ещё опробовать новые технологии как не на небольших программах.

В коде много вещей с которыми я пока не разобрался, они помечены TODO.

Пока что не использует никаких шаблонизаторов, захотел посмотреть как это будет выглядеть. В результате в принципе работает, на одну зависимость меньше, код уродливее, и идентация html сломана. Потом попробую настоящие шаблонизаторы.

Программа читает файлы с диска только раз, при запуске, и держит всё в памяти. При работе она только перезаписывает данные.

Видел как люди делали быструю рекомпиляцию проекта, ctrl-shift-f10 или как-то так, hotswapping. Надо поискать как это делается. Наверное только с шаблонизаторами работает.

Сначала хотел сделать саму страницу в @GetMapping("/"), форму редактирования в @GetMapping("/edit"), отсылать данные формы в @PostMapping("/edit") с сообщением либо "Исправлено успешно, перенаправление через 5 секунд" или "Ошибка на строке такой-то" с той же формой. Но в результате всё уместил в @GetMapping("/") и @PostMapping("/"), из-за чего браузер часто достаёт сообщением "Отправить дополнительные данные, да нет?" когда я обновляю страницу. 

## Что каждый файл делает

* private/data.txt - здесь хранятся данные визитки
* private/root.html - шаблон основной страницы
* private/form.html - шаблон формы редактирования
* public/foto.jpg - фотография
* src/com.me.vizitka.Main - SpringBootApplication, начало программы
* src/com.me.vizitka.VizitkaKontroller - маршрутизатор, получает запросы и возвращает ответы
* src/com.me.vizitka.Data - здесь хранятся шаблоны, текстовая информация, html информация, фотография, и немного служебного кода. Model и View в одном лице.
* src/com.me.vizitka.WebConfig - пуст

## TOMAYBEDO

* Загрузка png изображений
* Чтение размера изображений из файла, страницы лучше грузятся если интернет медленный и размеры изображения заранее заданы в самом html.
* favicon.ico
* Посмотреть как spring работает со статичными ресурсами, наверняка есть методы покрасивее. Под покрасивее все наверняка будут предлагать использовать базы данных.
* Cache control, для этого надо хранить время последней модификации файла.
* Авторизация, пока что программа просто проверяет, идут ли запросы с локального компьютера или из вне.
* Тесты.
* Переписать всё это на си или голанг.
* Найти бесплатный хостинг для этого.
* Более сложное форматирование - заголовки, жирный текст, курсив. Иконки для ссылок.
* Джаваскрипт редактирование. Показывать прогресс загрузки файла.
* Undo. Можно случайно удалить что-то важное, а истории нет.
* https